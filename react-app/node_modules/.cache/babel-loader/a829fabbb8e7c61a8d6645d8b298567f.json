{"ast":null,"code":"var _jsxFileName = \"/Users/leonzalion/Desktop/QuikReport/react-app/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Pusher from 'pusher-js';\nconst API_URL = 'http://172.17.135.12:9000/api/';\nconst PUSHER_APP_KEY = 'adf7ac7a5c51dcc45eb4';\nconst PUSHER_APP_CLUSTER = 'us2';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tasks: [],\n      task: ''\n    };\n    this.updateText = this.updateText.bind(this);\n    this.postTask = this.postTask.bind(this);\n    this.deleteTask = this.deleteTask.bind(this);\n    this.addTask = this.addTask.bind(this);\n    this.removeTask = this.removeTask.bind(this);\n  }\n\n  updateText(e) {\n    this.setState({\n      task: e.target.value\n    });\n  }\n\n  postTask(e) {\n    e.preventDefault();\n\n    if (!this.state.task.length) {\n      return;\n    }\n\n    const newTask = {\n      task: this.state.task\n    };\n    fetch(API_URL + 'new', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newTask)\n    }).then(console.log);\n  }\n\n  deleteTask(id) {\n    fetch(API_URL + id, {\n      method: 'delete'\n    }).then(console.log);\n  }\n\n  addTask(newTask) {\n    this.setState(prevState => ({\n      tasks: prevState.tasks.concat(newTask),\n      task: ''\n    }));\n  }\n\n  removeTask(id) {\n    this.setState(prevState => ({\n      tasks: prevState.tasks.filter(el => el.id !== id)\n    }));\n  }\n\n  componentDidMount() {\n    this.pusher = new Pusher(PUSHER_APP_KEY, {\n      cluster: PUSHER_APP_CLUSTER,\n      encrypted: true\n    });\n    this.channel = this.pusher.subscribe('tasks');\n    this.channel.bind('inserted', this.addTask);\n    this.channel.bind('deleted', this.removeTask);\n  }\n\n  render() {\n    let tasks = this.state.tasks.map(item => React.createElement(Task, {\n      key: item.id,\n      task: item,\n      onTaskClick: this.deleteTask,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }));\n    return React.createElement(\"div\", {\n      className: \"todo-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"input-todo\",\n      placeholder: \"New task\",\n      onChange: this.updateText,\n      value: this.state.task,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"btn btn-add\",\n      onClick: this.postTask,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"+\")), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, tasks));\n  }\n\n}\n\nclass Task extends Component {\n  constructor(props) {\n    super(props);\n    this._onClick = this._onClick.bind(this);\n  }\n\n  _onClick() {\n    this.props.onTaskClick(this.props.task.id);\n  }\n\n  render() {\n    return React.createElement(\"li\", {\n      key: this.props.task.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, this.props.task.task), React.createElement(\"div\", {\n      className: \"delete\",\n      onClick: this._onClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"-\"));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/leonzalion/Desktop/QuikReport/react-app/src/App.js"],"names":["React","Component","Pusher","API_URL","PUSHER_APP_KEY","PUSHER_APP_CLUSTER","App","constructor","props","state","tasks","task","updateText","bind","postTask","deleteTask","addTask","removeTask","e","setState","target","value","preventDefault","length","newTask","fetch","method","headers","body","JSON","stringify","then","console","log","id","prevState","concat","filter","el","componentDidMount","pusher","cluster","encrypted","channel","subscribe","render","map","item","Task","_onClick","onTaskClick"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\n\nimport Pusher from 'pusher-js';\n\nconst API_URL = 'http://172.17.135.12:9000/api/';\nconst PUSHER_APP_KEY = 'adf7ac7a5c51dcc45eb4';\nconst PUSHER_APP_CLUSTER = 'us2';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tasks: [],\n      task: ''\n    };\n    this.updateText = this.updateText.bind(this);\n    this.postTask = this.postTask.bind(this);\n    this.deleteTask = this.deleteTask.bind(this);\n    this.addTask = this.addTask.bind(this);\n    this.removeTask = this.removeTask.bind(this);\n  }\n    \n  updateText(e) {\n    this.setState({ task: e.target.value });\n  }\n\n  postTask(e) {\n    e.preventDefault();\n    if (!this.state.task.length) {\n      return;\n    }\n    const newTask = {\n      task: this.state.task\n    };\n    fetch(API_URL + 'new', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newTask)\n    }).then(console.log);\n  }\n    \n  deleteTask(id) {\n    fetch(API_URL + id, {\n      method: 'delete'\n    }).then(console.log);\n  }\n\n  addTask(newTask) {\n    this.setState(prevState => ({\n      tasks: prevState.tasks.concat(newTask),\n      task: ''\n    }));\n  }\n    \n  removeTask(id) {\n    this.setState(prevState => ({\n      tasks: prevState.tasks.filter(el => el.id !== id)\n    }));\n  }\n\n  componentDidMount() {\n    this.pusher = new Pusher(PUSHER_APP_KEY, {\n\t  cluster: PUSHER_APP_CLUSTER,\n      encrypted: true,\n    });\n    this.channel = this.pusher.subscribe('tasks');\n\t\n    this.channel.bind('inserted', this.addTask);\n    this.channel.bind('deleted', this.removeTask);\n  }\n    \n  render() {\n    let tasks = this.state.tasks.map(item =>\n      <Task key={item.id} task={item} onTaskClick={this.deleteTask} />\n    );\n\n    return (\n      <div className=\"todo-wrapper\">\n        <form>\n          <input type=\"text\" className=\"input-todo\" placeholder=\"New task\" onChange={this.updateText} value={this.state.task} />\n          <div className=\"btn btn-add\" onClick={this.postTask}>+</div>\n        </form>\n        \n        <ul>\n          {tasks}\n        </ul>\n      </div>\n    );\n  }\n}\n\nclass Task extends Component {\n  constructor(props) {\n    super(props);\n    this._onClick = this._onClick.bind(this);\n  }\n  _onClick() {\n    this.props.onTaskClick(this.props.task.id);\n  }\n  render() {\n    return (\n      <li key={this.props.task.id}>\n        <div className=\"text\">{this.props.task.task}</div>\n        <div className=\"delete\" onClick={this._onClick}>-</div>\n      </li>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}